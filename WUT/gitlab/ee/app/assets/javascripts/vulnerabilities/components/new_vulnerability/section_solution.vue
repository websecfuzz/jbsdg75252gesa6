<script>
import { s__, __ } from '~/locale';
import MarkdownEditor from '~/vue_shared/components/markdown/markdown_editor.vue';
import SettingsSection from '~/vue_shared/components/settings/settings_section.vue';

export default {
  components: {
    MarkdownEditor,
    SettingsSection,
  },
  inject: ['markdownDocsPath', 'markdownPreviewPath'],
  props: {
    isSubmitting: {
      type: Boolean,
      required: false,
      default: false,
    },
  },
  data() {
    return {
      solution: '',
      formFieldProps: {
        id: 'form-solution',
        name: 'form-solution',
        'aria-label': this.$options.i18n.description,
        placeholder: this.$options.i18n.description,
      },
    };
  },
  methods: {
    emitChanges() {
      this.$emit('change', { solution: this.solution });
    },
  },
  i18n: {
    title: __('Solution'),
    description: s__(
      'VulnerabilityManagement|(optional) Include the solution to the vulnerability if available.',
    ),
  },
  restrictedToolBarItems: ['attach-file'],
};
</script>
<template>
  <settings-section :heading="$options.i18n.title" heading-classes="!-gl-mb-2">
    <div class="gl-border gl-rounded-base">
      <markdown-editor
        v-model="solution"
        :disable-attachments="true"
        :render-markdown-path="markdownPreviewPath"
        :markdown-docs-path="markdownDocsPath"
        :is-submitting="isSubmitting"
        :form-field-props="formFieldProps"
        @input="emitChanges"
      />
    </div>
  </settings-section>
</template>
